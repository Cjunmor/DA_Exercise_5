---
title: "Junca_E5"
author: "Carolina Junca"
date: "3/11/2020"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, dev = "png",  dpi = 100)

# install.packages("ggplot2")
# install.packages("multcompView")
library(multcompView)
library(agricolae)
library(ggplot2)
```
## Exercises
Save all the graphics in the folder “results” in png format with a resolution of 100 dpi.

### Exercise 1
For the data InsectSpray, make a table for the number of insects for each spray with the mean, median and standard error.

```{r}
#Table with general mean, median and standard error
IS <- InsectSprays
mn <- numeric()
s_e <- numeric()
mdn <- numeric()
n <- character()

for (i in levels (InsectSprays$spray)){
  x <- unlist(InsectSprays[IS$spray == i, ]) #for each insect spray level, take the "count" that accompanies it
  n <- c(n, i) #to have the name
  mn <- c(mn, mean(x))
  s_e <- c(s_e, sd(x)/sqrt(length(x)))
  mdn <- c(mdn,median(x))
}
df <- data.frame(n,mn,s_e,mdn)
knitr::kable(df, caption = "Table 1. Mean (mn), standard error (s_e) and median (mdn) of each spray-type (n).")
```

### Exercise 2
Print a plot to see the differences of counts between sprays. Include a caption explaining the figure. 

```{r, fig.cap=cap}
plot((InsectSprays$count ~ InsectSprays$spray), ylab="Insect count",
        xlab= "Type of spray",
cap <- "Figure 1: Relationships between different sprays and insect counts.",
legend( x = "top", 
       legend = paste("spray", as.character(df$n))))
```

#### Which type of plot is the one you choose and why?


### Exercise 3
Test for differences between sprays using anova and a posthoc comparison and redo the previous plot including the representation of all posthoc differences.

For the anova use the command aov() and for the posthoc comparison use the Tukey’s ‘Honest Significant Difference’ with the TukeyHSD() and agricolae::HSD.test(). See the differences between both methods.

```{r}
ANOVA <- aov(IS$count ~ IS$spray, data= IS)
print(summary(ANOVA))

```

### Exercise 4
Test for differences between sprays using non-parametric Kruskal-Wallis rank sum test. Again, redo the plot with these results.

# ```{r}
# 
# 
# ```

### Exercise 5
Transform count data using sqrt(counts) and redo the anova, the Tukey posthoc comparison and the plot.

# ```{r}
# 
# 
# ```

### Exercise 6
Test for normality of residuals for the two performed anova analyses of points 4 and 6 using shapiro.test() and use plot the anova to see the qqplots and compare them.

# ```{r}
# 
# 
# ```

### Exercise 7
Which of the previous analysis is the adequate in this case? Why? Is there any difference in the results between the square root transformed ANOVA and the Kruskal-Wallis analyses? Is there any difference in the results between the direct ANOVA and the square root transformed ANOVA? Which ones?

# ```{r}
# 
# 
# ```
